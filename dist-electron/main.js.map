{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["import { app, BrowserWindow, ipcMain } from 'electron';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\nimport * as fs from 'fs';\n\n// ES module equivalent of __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// The built directory structure\n//\n// \u251C\u2500\u252C\u2500\u252C dist\n// \u2502 \u2502 \u2514\u2500\u2500 index.html\n// \u2502 \u2502\n// \u251C\u2500\u252C\u2500\u252C dist-electron\n// \u2502 \u2502 \u251C\u2500\u2500 main.js\n// \u2502 \u2502 \u2514\u2500\u2500 preload.js\n// \u2502\nprocess.env.DIST = path.join(__dirname, '../dist');\nprocess.env.VITE_PUBLIC = process.env.VITE_DEV_SERVER_URL\n  ? path.join(process.env.DIST, '../public')\n  : process.env.DIST;\n\nlet win: BrowserWindow | null;\n// \uD83D\uDEA7 Use ['ENV_NAME'] avoid vite:define plugin\nconst VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL'] || 'http://localhost:5173';\n\n// Add error handling for uncaught exceptions\nprocess.on('uncaughtException', (error) => {\n  console.error('Uncaught Exception:', error);\n});\n\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('Unhandled Rejection at:', promise, 'reason:', reason);\n});\n\nfunction createWindow() {\n  console.log('\uD83D\uDE80 Creating Electron window...');\n  console.log('\uD83D\uDCC1 Dist path:', process.env.DIST);\n  console.log('\uD83C\uDF10 Dev server URL:', VITE_DEV_SERVER_URL);\n  \n  win = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    minWidth: 800,\n    minHeight: 600,\n    icon: path.join(process.env.VITE_PUBLIC, 'electron-vite.svg'),\n    webPreferences: {\n      nodeIntegration: false,\n      contextIsolation: true,\n      preload: path.join(__dirname, 'preload.js'),\n      webSecurity: true,\n      allowRunningInsecureContent: false,\n    },\n  });\n\n  // Add error handling for window creation\n  win.on('closed', () => {\n    console.log('\uD83D\uDD12 Window closed');\n    win = null;\n  });\n\n  // Add error handling for page load\n  win.webContents.on('did-fail-load', (event, errorCode, errorDescription, validatedURL) => {\n    console.error('\u274C Page failed to load:', {\n      errorCode,\n      errorDescription,\n      validatedURL\n    });\n  });\n\n  win.webContents.on('did-finish-load', () => {\n    console.log('\u2705 Page loaded successfully');\n    win?.webContents.send('main-process-message', new Date().toLocaleString());\n  });\n\n  // Add console logging from renderer process\n  win.webContents.on('console-message', (event, level, message, line, sourceId) => {\n    console.log(`[Renderer ${level}]:`, message, `(${sourceId}:${line})`);\n  });\n\n  if (VITE_DEV_SERVER_URL) {\n    console.log('\uD83C\uDF10 Loading from dev server:', VITE_DEV_SERVER_URL);\n    win.loadURL(VITE_DEV_SERVER_URL);\n    win.webContents.openDevTools();\n  } else {\n    const indexPath = path.join(process.env.DIST, 'index.html');\n    console.log('\uD83D\uDCC4 Loading from file:', indexPath);\n    \n    // Check if the file exists\n    if (!fs.existsSync(indexPath)) {\n      console.error('\u274C index.html not found at:', indexPath);\n      console.error('\uD83D\uDCA1 Make sure to run \"npm run build\" first');\n      win.loadURL('data:text/html,<h1>Build Error</h1><p>index.html not found. Please run \"npm run build\" first.</p>');\n      return;\n    }\n    \n    win.loadFile(indexPath);\n  }\n\n  // Test active push message to Renderer-process.\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', new Date().toLocaleString());\n  });\n}\n\napp.on('window-all-closed', () => {\n  console.log('\uD83D\uDD12 All windows closed');\n  if (process.platform !== 'darwin') {\n    app.quit();\n    win = null;\n  }\n});\n\napp.whenReady().then(() => {\n  console.log('\uD83C\uDF89 App is ready, creating window...');\n  createWindow();\n});\n\napp.on('activate', () => {\n  console.log('\uD83D\uDD04 App activated');\n  const allWindows = BrowserWindow.getAllWindows();\n  if (allWindows.length) {\n    allWindows[0].focus();\n  } else {\n    createWindow();\n  }\n});\n\n// IPC handlers for Reddit API and file system operations\nipcMain.handle('reddit-auth', async (event, code: string) => {\n  try {\n    console.log('\uD83D\uDD10 Reddit auth requested with code:', code);\n    \n    // Get environment variables\n    const clientId = process.env.VITE_REDDIT_CLIENT_ID;\n    const clientSecret = process.env.VITE_REDDIT_CLIENT_SECRET;\n    const redirectUri = 'http://localhost:5173/auth/callback';\n    \n    console.log('\uD83D\uDD11 Auth config:', {\n      hasClientId: !!clientId,\n      hasClientSecret: !!clientSecret,\n      redirectUri\n    });\n    \n    if (!clientId || !clientSecret) {\n      console.error('\u274C Reddit API credentials not configured');\n      return { success: false, message: 'Reddit API credentials not configured' };\n    }\n\n    // Exchange code for token\n    const tokenResponse = await fetch('https://www.reddit.com/api/v1/access_token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': `Basic ${Buffer.from(`${clientId}:${clientSecret}`).toString('base64')}`,\n        'User-Agent': 'RedditSaverApp/1.0.0'\n      },\n      body: new URLSearchParams({\n        grant_type: 'authorization_code',\n        code: code,\n        redirect_uri: redirectUri\n      })\n    });\n\n    if (!tokenResponse.ok) {\n      const errorText = await tokenResponse.text();\n      console.error('\u274C Token exchange failed:', errorText);\n      return { success: false, message: `Token exchange failed: ${tokenResponse.status}` };\n    }\n\n    const tokenData = await tokenResponse.json();\n    console.log('\u2705 Token exchange successful');\n    \n    // Get user information\n    const userResponse = await fetch('https://oauth.reddit.com/api/v1/me', {\n      headers: {\n        'Authorization': `Bearer ${tokenData.access_token}`,\n        'User-Agent': 'RedditSaverApp/1.0.0'\n      }\n    });\n\n    if (!userResponse.ok) {\n      console.error('\u274C Failed to get user information');\n      return { success: false, message: 'Failed to get user information' };\n    }\n\n    const userData = await userResponse.json();\n    console.log('\u2705 User info retrieved:', userData.name);\n    \n    // Store the authentication data (you might want to save this to a file or database)\n    console.log('\uD83D\uDCBE Authentication successful for user:', userData.name);\n    \n    return { \n      success: true, \n      token: tokenData,\n      user: userData\n    };\n  } catch (error) {\n    console.error('\u274C Reddit auth error:', error);\n    return { \n      success: false, \n      message: error instanceof Error ? error.message : 'Authentication failed' \n    };\n  }\n});\n\nipcMain.handle('download-content', async (event, ...args) => {\n  // TODO: Implement content download\n  console.log('\uD83D\uDCE5 Download content requested:', args);\n  return { success: false, message: 'Not implemented yet' };\n});\n\nipcMain.handle('get-saved-content', async (event, ...args) => {\n  // TODO: Implement fetching saved content\n  console.log('\uD83D\uDCCB Get saved content requested:', args);\n  return { success: false, message: 'Not implemented yet' };\n});\n"],
  "mappings": "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",
  "names": []
}
